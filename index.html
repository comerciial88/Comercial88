<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Sistema de Caja</title>
  <style>
    body { font-family: sans-serif; padding: 10px; }
    .top-bar, .product-form { margin-bottom: 20px; }
    input, button, select { margin: 5px; }
    #product-list div { margin: 5px 0; }
  </style>
</head>
<body>

  <!-- üîù Barra superior -->
  <div class="top-bar">
    <input type="text" id="search" placeholder="Buscar producto..." oninput="buscarProducto()">
    <button onclick="escanearCodigo()">üì∑ Escanear</button>
    <span id="fecha"></span>
    <button onclick="configurarTasa()">üí± Tasa: <span id="tasa">35.00</span></button>
    <button onclick="mostrarFormulario()">‚ûï Agregar producto</button>
  </div>

  <!-- üì¶ Lista de productos -->
  <div id="product-list"></div>

  <!-- üìù Formulario de producto -->
  <div class="product-form" id="formulario" style="display:none;">
    <input type="text" id="nombre" placeholder="Nombre del producto">
    <input type="number" id="precio" placeholder="Precio en USD">
    <input type="file" id="imagen">
    <input type="text" id="codigo" placeholder="C√≥digo de barras">
    <button onclick="escanearParaFormulario()">üì∑ Escanear c√≥digo</button>
    <button onclick="registrarProducto()">Guardar</button>
  </div>

  <!-- üìú Script principal -->
  <script>
    let productos = [];
    let tasa = 35.00;

    document.getElementById("fecha").textContent = new Date().toLocaleDateString();

    function buscarProducto() {
      const query = document.getElementById("search").value.toLowerCase();
      const resultados = productos.filter(p => p.nombre.toLowerCase().includes(query));
      mostrarResultados(resultados);
    }

    function mostrarResultados(lista) {
      const contenedor = document.getElementById("product-list");
      contenedor.innerHTML = "";
      lista.forEach(p => {
        contenedor.innerHTML += `<div>${p.nombre} - $${p.precio} / Bs ${(p.precio * tasa).toFixed(2)}</div>`;
      });
    }

    function configurarTasa() {
      const nuevaTasa = prompt("Ingrese nueva tasa de cambio:", tasa);
      if (nuevaTasa) {
        tasa = parseFloat(nuevaTasa);
        document.getElementById("tasa").textContent = tasa.toFixed(2);
        buscarProducto();
      }
    }

    function mostrarFormulario() {
      document.getElementById("formulario").style.display = "block";
    }

    function registrarProducto() {
      const nombre = document.getElementById("nombre").value;
      const precio = parseFloat(document.getElementById("precio").value);
      const codigo = document.getElementById("codigo").value;
      productos.push({ nombre, precio, codigo });
      document.getElementById("formulario").reset();
      document.getElementById("formulario").style.display = "none";
      buscarProducto();
    }

    function escanearCodigo() {
      alert("Aqu√≠ se abrir√≠a la c√°mara para escanear y buscar el producto.");
      // Integrar librer√≠a como QuaggaJS o ZXing para escaneo real
    }

    function escanearParaFormulario() {
      alert("Aqu√≠ se abrir√≠a la c√°mara para escanear y llenar el campo de c√≥digo.");
      // Integrar escaneo y asignar a document.getElementById("codigo").value
    }
  </script>

</body>
</html>
