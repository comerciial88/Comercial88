<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHARCUTERIA</title>
    <link rel="stylesheet" href="charcuteria.css">
</head>
<body>
    <!-- Cartica flotante -->
    <div id="carrito" class="cart">
        <!-- Icono del carrito -->
        <div class="cart-icon">🛒</div>

        <!-- Detalles del carrito (ocultos por defecto) -->
        <div class="cart-details">
            <!-- Aquí está la lista de productos del carrito -->
            <ul id="lista-productos">
                <!-- Productos agregados se muestran aquí -->
            </ul>
            <p>Total: $<span id="total">0.00</span></p>      
            <button id="enviar-pedido" class="btn-enviar" onclick="copiarListaCarrito()">Obtener</button>
        </div>        
            </div>
    <header>
        <h1>CHARCUTERIA</h1>
    </header>
    <main>
        <div class="search-bar">
            <input type="text" id="search" placeholder="Buscar producto...">
        </div>
        <div class="centrar">
        <a href="https://comerciial88.github.io/Comercial88/indice.html" class="button">Volver</a>
        </div>
        <section id="catalog" class="catalog">
            <div class="product" data-name="Jamon estandar" data-nombre="Jamon estandar" data-precio="12.47" data-tipo="gramos">
                <img src="Charcuteria-imagenes/Jamon1.jpg" alt="Producto 1">
                <h2>Jamon estandar Millenium</h2>
                <p>$12.47/Kg</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="Jamon espalda" data-nombre="jamon Espalda" data-precio="12.47" data-tipo="gramos">
                <img src="Charcuteria-imagenes/Jamon2.jpeg" alt="Producto 2">
                <h2>Jamon espalda Millenium</h2>
                <p>$12.47/Kg</p>
                <button onclick="agregarProductoDesdeHTML(this)">agregar al carrito</button>            
            </div>
            <div class="product" data-name="Jamon pechuga" data-nombre="Jamon Pechuga" data-precio="12.47" data-tipo="gramos"> 
                <img src="Charcuteria-imagenes/Jamon3.jpeg" alt="Producto 3">
                <h2>Pechuga de Pavo Millenium</h2>
                <p>$12.47/Kg</p>
                <button onclick="agregarProductoDesdeHTML(this)">agregar al carrito</button>
            </div>
            <div class="product" data-name="Tocineta" data-nombre="Tocineta" data-precio="21.21" data-tipo="gramos">
                <img src="Charcuteria-imagenes/Tocineta1.jpg" alt="Producto 4">
                <h2>tocineta</h2>
                <p>$21,21/Kg</p>
                <button onclick="agregarProductoDesdeHTML(this)">agregar al carrito</button>
            </div>
            <div class="product" data-name="Queso Pecorino" data-nombre="Pecorino99g" data-precio="0" data-tipo="unidad">
                <img src="Charcuteria-imagenes/pecorino1.jpg" alt="Producto 5">
                <h2>Pecorino De mi tierra</h2>
                <p>$0</p>
                <button onclick="agregarProductoDesdeHTML(this)">agregar al carrito</button>
            </div>
            <div class="product" data-name="Queso Gaby Crema" data-nombre="Queso LecheGABY" data-precio="0" data-tipo="unidad">
                <img src="Charcuteria-imagenes/gaby1.jpeg" alt="Producto 6">
                <h2>Gaby Crema de Leche</h2>
                <p>$0</p>
                <button onclick="agregarProductoDesdeHTML(this)">agregar al carrito</button>
            </div>
            <div class="product" data-name="Queso Gaby Crema" data-nombre="Queso CremaGABY" data-precio="0" data-tipo="unidad">
                <img src="Charcuteria-imagenes/gaby1.jpeg" alt="Producto 6">
                <h2>Gaby Queso Crema</h2>
                <p>$0</p>
                <button onclick="agregarProductoDesdeHTML(this)">agregar al carrito</button>
            </div>
            <div class="product" data-name="Queso Llanero" data-nombre="QuesoLlanero" data-precio="0" data-tipo="gramos">
                <img src="Charcuteria-imagenes/Queso1.jpg" alt="Producto 6">
                <h2>Queso Llanero</h2>
                <p>$Sin precio</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="Queso amarillo" data-nombre="Queso Amarillo" data-precio="16.07" data-tipo="gramos">
                <img src="Charcuteria-imagenes/Queso2.jpg" alt="Producto 6">
                <h2>Queso Amarillo</h2>
                <p>$16,07</p>
                <button onclick="agregarProductoDesdeHTML(this)">agregar al carrito</button>
            </div>
            <div class="product" data-name="Queso Paisa" data-nombre="" data-precio="" data-tipo="">
                <img src="Charcuteria-imagenes/Queso3.jpeg" alt="Producto 6">
                <h2>Queso Paisa</h2>
                <p>$0.00</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="Mantequilla Campestre" data-nombre="" data-precio="" data-tipo="">
                <img src="Charcuteria-imagenes/mantequilla1.jpg" alt="Producto 6">
                <h2>Mantequilla Campestre</h2>
                <p>$0</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="mortadela Alibal" data-nombre="Morta..Alibal" data-precio="2.70" data-tipo="unidad">
                <img src="Charcuteria-imagenes/Mortadela1.jpg" alt="Producto 6">
                <h2>Mortadela Alibal 500g</h2>
                <p>$2.70</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="Huevo" data-nombre="huevo" data-precio="5.40" data-tipo="unidad">
                <img src="Charcuteria-imagenes/huevo1.jpg" alt="Producto 6">
                <h2>Huevo 1/2</h2>
                <p>$5.40</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="Queso Toscano" data-nombre= ñ"" data-precio="" data-tipo="">
                <img src="Charcuteria-imagenes/QuesoT.jpeg" alt="Producto 6">
                <h2>Queso Toscano</h2>
                <p>$Sin precio</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="Queso Mozzarella" data-nombre="Queso Mozzare" data-precio="0" data-tipo="gramos">
                <img src="Charcuteria-imagenes/Quesomozz.jpg" alt="Producto 6">
                <h2>Queso Mozzarella</h2>
                <p>$0.00</p>
                <button onclick="agregarProductoDesdeHTML(this)">agregar al carrito</button>
            </div>
            <div class="product" data-name="Salchichon" data-nombre="salchi...españa" data-precio="42.43" data-tipo="gramos">
                <img src="Charcuteria-imagenes/salchichon.jpg" alt="Producto 6">
                <h2>Salchicon especial España</h2>
                <p>$42.43</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="Mortadela pollo"data-nombre="Mortade..pollo" data-precio="5.66" data-tipo="gramos">
                <img src="Charcuteria-imagenes/mortadela2.jpg" alt="Producto 6">
                <h2>Mortadela de Pollo</h2>
                <p>$5.66</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
            <div class="product" data-name="Producto" data-nombre="" data-precio="" data-tipo="">
                <img src="huo1.jpg" alt="Producto 6">
                <h2>NONE</h2>
                <p>$0.00</p>
                <button onclick="agregarProductoDesdeHTML(this)">Agregar al carrito</button>
            </div>
        </section>
    </main>
    <script src="charcuteria.js"></script>
    <script src="carrito.js"></script>;
   <script>
    function actualizarPrecios() {
        // Obtener el porcentaje almacenado en localStorage
        const porcentaje = parseFloat(localStorage.getItem("aumentoPorcentaje"));

        if (isNaN(porcentaje)) {
            console.log("No se detectó un porcentaje válido.");
            return;
        }

        // Seleccionar todos los productos con la clase `.product`
        const productos = document.querySelectorAll(".product");

        productos.forEach((producto, index) => {
            // Obtener el precio actual desde data-precio
            const precioActual = parseFloat(producto.getAttribute("data-precio"));

            if (!isNaN(precioActual)) {
                // Calcular el nuevo precio con el porcentaje
                const nuevoPrecio = (precioActual * (1 + porcentaje / 100)).toFixed(2);

                // Actualizar data-precio y el texto de `<p>`
                producto.setAttribute("data-precio", nuevoPrecio);
               // producto.querySelector("").textContent = `$${nuevoPrecio}/${producto.getAttribute("data-tipo")}`;
                console.log(`Producto ${index + 1}: Precio actualizado a ${nuevoPrecio}`);
            } else {
                console.log(`Producto ${index + 1}: Precio no válido (data-precio está vacío).`);
            }
        });
    }

    // Ejecutar la función cuando el DOM esté listo
    document.addEventListener("DOMContentLoaded", actualizarPrecios);
</script>
</body>
</html>
